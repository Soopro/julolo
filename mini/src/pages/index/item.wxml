<!-- posters -->
<view class="cover square"
      wx:if="{{!item.figures}}">
  <image src="{{item.src}}"
         background-size="cover"
         background-position="center center"/>
</view>
<view class="showreel square"
      wx:else>
  <swiper indicator-dots="true"
          autoplay="true"
          circular="true">
    <swiper-item>
      <image src="{{item.src}}"
             background-size="cover"
             background-position="center center"/>
    </swiper-item>
    <block wx:for="{{item.figures}}"
           wx:for-item="pic"
           wx:key="index">
      <swiper-item>
        <image src="{{pic}}"
               background-size="cover"
               background-position="center center"/>
      </swiper-item>
    </block>
  </swiper>
</view>

<!-- product -->
<view class="article"
      wx:if="{{item}}">
  <text class="headline clamp"
        selectable="true">{{item.title}}</text>

  <view class="flex-row"
        wx:if="{{item.price}}">
    <text class="p price flex">¥ {{item.price}}</text>
    <text class="p draft"
          wx:if="{{item.volume}}">销量 {{item.volume}}</text>
    <text class="p draft"
          wx:else>{{item.type == 1 ? '天猫商城' : '淘宝集市'}}</text>
  </view>

  <view class="divider thin"></view>

  <view class="flex-row info">
    <text class="p flex text-nowrap">{{item.shop_title}}</text>
    <text class="p draft"
          wx:if="{{item.end_time}}">结束 {{item.end_time}}</text>
    <text class="p draft"
          wx:else>长期优惠</text>
  </view>

  <block wx:if="{{item.description}}">
    <view class="divider thin"></view>
    <view class="info">
      <text class="p">{{item.description}}</text>
    </view>
  </block>
</view>

<view class="buyer-holder"></view>

<!-- buy -->
<view class="buyer"
      wx:if="{{item}}">
  <view class="flex-row">
    <text class="coupon accent flex"
          wx:if="{{item.coupon_info}}">{{item.coupon_info}}</text>
    <text class="coupon draft flex"
          wx:else>{{'无需用券'}}</text>
    <button class="add-to-cart"
            type="accent"
            wx:if="{{item.url}}"
            bind:tap="buy">
      <image class="ico" src="{{image.coupon}}" />
      <text>领券购买!</text>
    </button>
    <button class="add-to-cart"
            type="warn"
            wx:else>
      <image class="ico" src="{{image.coupon}}" />
      <text>买不了...</text>
    </button>
  </view>
</view>
