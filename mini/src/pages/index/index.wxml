<!-- events -->
<view class="showreel"
      wx:if="{{events.length > 0}}">
  <swiper indicator-dots="true"
          autoplay="true"
          circular="true">
    <block wx:for="{{events}}"
           wx:for-item="evt"
           wx:key="index">
      <swiper-item data-evt="{{evt}}"
                   bind:tap="enter_event">
        <image src="{{evt.poster}}"
               background-size="cover"
               background-position="center center"/>
      </swiper-item>
    </block>
  </swiper>
</view>

<!-- categories -->
<view class="menu menu-horiz">
  <scroll-view class="menu-inner"
               scroll-x
               wx:if="{{categories.length > 0}}">
    <view class="menu-item"
          wx:for="{{categories}}"
          wx:for-item="cat"
          wx:key="index">
      <button plain
              data-category="{{cat}}"
              bind:tap="enter_category">
        <image src="{{cat.icon}}"
               mode="aspectFill" />
        <text>{{cat.label}}</text>
      </button>
    </view>
  </scroll-view>
  <view class="arrow-left"></view>
  <view class="arrow-right"></view>
</view>

<!-- promotions -->
<view class="container">
  <view class="grid-list">
    <view class="grid"
          wx:for="{{promotions}}"
          wx:for-item="promo"
          wx:key="index"
          data-promo="{{promo}}"
          bind:tap="enter_promo">
      <image class="figure-ribbon"
             src="{{promo.poster}}"
             mode="aspectFill"/>
    </view>
  </view>
</view>

<!-- coupons -->
<view class="section-divider">
  <text class="hint">❀ 每日上新 ❀</text>
</view>
<view class="grid-list">
  <view class="{{(index == 0 && coupons.length % 2) ? 'grid-head': 'grid'}}"
        wx:for="{{coupons}}"
        wx:key="index">
    <view class="card"
          bind:tap="enter"
          data-item="{{item}}">
      <image src="{{item.src}}" mode="aspectFill" lazy-load/>
      <view class="card-text">
        <text class="title">{{item.title}}</text>
        <view class="info">
          <text class="coupon">{{item.coupon}}</text>
          <text class="price">¥ {{item.price}}</text>
        </view>
      </view>
    </view>
  </view>
</view>


<!-- footer -->
<view class="footer"
      wx:if="{{coupons.length > 0}}">
  <import src="/widgets/loadmore.wxml"/>
  <template is="loadmore" data="{{loading: is_loading, more: has_more}}"/>
</view>
